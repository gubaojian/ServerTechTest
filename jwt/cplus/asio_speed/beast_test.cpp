#include <iostream>
#include <boost/beast/core.hpp>
#include <boost/beast/websocket.hpp>
#include <boost/asio/connect.hpp>
#include <boost/asio/ip/tcp.hpp>
#include <cstdlib>


//https://github.com/boostorg/beast/issues/1699 

namespace beast = boost::beast;         // from <boost/beast.hpp>
namespace http = beast::http;           // from <boost/beast/http.hpp>
namespace websocket = beast::websocket; // from <boost/beast/websocket.hpp>
namespace net = boost::asio;            // from <boost/asio.hpp>
using tcp = net::ip::tcp;               // from <boost/asio/ip/tcp.hpp>

int main() {
    try {
        // 检查命令行参数
        auto const host = "localhost";
        auto const port = "6001";
        auto const text = "Hello, WebSocket Server!";
        auto const target = "/wsgbus?role=pusher&pusherAppId=181713074824&pusherAppToken=Y8FG0tbs7pgujQccNcEABIuW1it2Rhfg";

        // 初始化I/O上下文和解析器
        net::io_context ioc;
        tcp::resolver resolver(ioc);
        websocket::stream<tcp::socket> ws(ioc);

        // 解析地址
        auto const results = resolver.resolve(host, port);

        // 连接到服务器
        net::connect(ws.next_layer(), results.begin(), results.end());

        // 执行WebSocket握手
        ws.handshake(host, target);
        //beast
        // 1024KB, 速度500mb。
        // 5*1024Kb 速度 1.23GB 
        // 5*1024Kb 速度 1.23GB 
        // 8*1024Kb 速度 1.25GB 
        std::string message = R"({"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
        {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
        {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
        {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
        {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
        {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
        {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
          {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
            {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
              {"msg":"XZ2EtLKVw29aorLT36tuFhenJxEVJaOWx2qJsarysxYbkeTLj3DxDYvbSHZdojpOiKSzQqaSEI65XuBHlT1RggayiEckezqX5nVoDPxlaAas2YmzPfXCUHvAJYfAHta7NjYMaTFAhBOGBM1MqZhktSKoCqgQHVqMSd9Sb9g6Gx3C1drdyfcDOQUGzoc3yOxNjPrUaESx3d3A6H2OmsylX8AaBTtxNPWl52aeuaflCXrqByPsh7u3Cxa3Y6sShiY1AU0Ejghmkbn3DLNBJZppz5xImaO5YJc3XeIWN9OvAIIr34quBFvQqC45BjHHQwOh7mSevqxQYsKU0g4UHleguBI9d8yPWcqlYd1I2lE28Ubm6aTFjyw2hu4WytwUCnFkEENuIwI67rWyzygJ0RJW57PN7udn8mOJDRjdKfMVgYjXfnx0tMsMzxLtJQAit2Ep1UVff0ZCGMuIlSJChOnoicY5uyE7mBQolQDZlPKhtlecq9b7TYQGJOh11rrsdbT3a9ZwcwgMXKmLPCBLgT3WAhKHTiRUgvMKIaCYJGJCm0aeDXfLJSqc46T9FHB35eJh9IANbcvkjL7qIkLLG4MPaPj5aKZWJfkbgjSUtqpD50vuamESGuf22790rbudJuuGSV8xuXGkQLtrCD8eftm0ExN12ZadrVJhi9wzlt1l9GRuZMhiS44elLz2ol5v8ITjMJjv5hrT82XwJIe3lg9iU8YaCNiCPWNuvowcya3u8VaSmUTDX0UCWy28huetwqdc7qIXexiHD4w5ZdDjDetkCUjS187vecqOlsqZMbGAWZykUcSaquZh0RGX72YYaXVkuqT8OVFtT2J7sqMIH6YOUbpKcnpSqEE4v4BzlEfkvZ5OMxmfc1LX0dskg9aTbnfG4HIxrwZeVgi0XsQJlZopBLXP3SwgEzeseI1Glk9XKAYMr02nKkLteVVOAisn3k4ZyhvQdOp8jlkxnk0g0bUU1umfrD1qPMFiOAAEtTGR83lUCGJ66X7yIpllaGYnS5Qm","wsgId":"ws_685208380980","connId":"b796e0ef-d60b-451d-b546-17d96526a018","action":"textMsg"}
        )";
        net::const_buffer buffer = net::buffer(message.data(), message.size());

        for(int i=0; i<1024*1024*1000; i++) {
            // 发送消息
            ws.write(buffer); 
        }
        

     
        // 输出响应内容
        std::cout << "Send end: " << std::endl;

        // 关闭WebSocket连接
        ws.close(websocket::close_code::normal);
    }
    catch (const std::exception& e) {
        std::cerr << "Error: " << e.what() << std::endl;
        return EXIT_FAILURE;
    }

    return EXIT_SUCCESS;
}
